$(function(){
  //defaults

  //$.fn.editable.defaults.url = '/risk_profiles';
  $.fn.editable.defaults.mode = 'inline';
  $.fn.editable.defaults.ajaxOptions = {type: "PATCH"};

  $('.rating #capital.editable').editable({
    params: function(params) {
      var data = {};
      data['rating'] = {};
      data['rating'][params.name] = params.value
      data['id'] = params.pk;

      return data;
    },

    source: [
      {value: 'Yes', text: 'true'},
      {value: 'No', text: 'false'}
    ]
  });

  $('.rating .editable').editable({
    params: function(params) {
      var data = {};
      data['broker_acct'] = {};
      data['broker_acct'][params.name] = params.value
      data['id'] = params.pk;

      //console.log(data);

      return data;
    },
    success: function(response, newValue) {
      $('.broker_'+$(this)[0].id+'_display').text(newValue);
    }
  });


  /*
  Auto Open Disabled
  $('#broker .editable').on('hidden', function(e, reason){
    if(reason === 'save' || reason === 'nochange') {
      var $next = $(this).closest('div').next().find('.editable');
      setTimeout(function() {
        $next.editable('show');
      }, 300);
    }
  });
  */
});
